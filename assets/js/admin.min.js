function genereateShortcode(e){var r=e.data("shortcode"),t=e.data("type"),a=jQuery(".cherry-sg-popup_fields",e),s=a.serializeArray();return result="["+r,jQuery.each(s,function(e,r){result+=" "+r.name+'="'+r.value+'"'}),result+="]","single"!==t&&(result+="[/"+r+"]"),result}function pasteShortcode(e,r){var t=genereateShortcode(e);r.val(t)}function cherrymailerGeneratorView(){jQuery.post(window.cherryMailerParam.ajaxurl,{action:"cherry_mailer_generator_view"},function(e){jQuery("#cherry-mailer-generate-view").html(e),jQuery(".cherry-sg-open").magnificPopup({type:"inline",preloader:!1,focus:"#name",callbacks:{open:function(){var e=jQuery("#generated-shortcode",this.content),r=this.content;jQuery(window).trigger("cherry-ui-elements-init",{target:r}),pasteShortcode(r,e),r.on("change blur",function(){pasteShortcode(r,e)}),r.on("click",".cherry-switcher-wrap",function(){pasteShortcode(r,e)}),jQuery(".cherry-slider-unit").on("slidechange",function(){pasteShortcode(r,e)})}}})})}function noticeCreate(e,r){function t(){var e=100;jQuery(jQuery(".notice-box").get().reverse()).each(function(){jQuery(this).css({top:e}),e+=jQuery(this).outerHeight(!0)})}var a,s=jQuery('<div class="notice-box '+e+'"><span class="dashicons"></span><div class="inner">'+r+"</div></div>"),n=0;jQuery("#cherry-mailer-option").append(s),t(),n=-1*(s.outerWidth(!0)+10),s.css({right:n}),a=setTimeout(function(){s.css({right:10}).addClass("show-state")},100),a=setTimeout(function(){n=-1*(s.outerWidth(!0)+10),s.css({right:n}).removeClass("show-state")},4e3),a=setTimeout(function(){s.remove(),clearTimeout(a)},4500)}jQuery(document).ready(function(){jQuery("#cherry-mailer-options-save").click(function(){var e=jQuery("#cherry-mailer-option"),r=e.serialize();jQuery(this).find("div").addClass("active"),jQuery(this).addClass("right-spiner"),jQuery.post(window.cherryMailerParam.ajaxurl,r,function(r){var t="",a="";e.find("#cherry-mailer-message").removeClass("cherry-message-success"),e.find("#cherry-mailer-message").removeClass("cherry-message-failed"),t=r.message?r.message:window.cherryMailerParam.default_error_message,a=r.type?r.type:"error",r.connect_status?(jQuery("#cherry-mailer-connect").removeClass("text-danger"),jQuery("#cherry-mailer-connect").removeClass("text-success"),jQuery("#cherry-mailer-connect").addClass("text-"+r.connect_status)):(jQuery("#cherry-mailer-connect").removeClass("text-success"),jQuery("#cherry-mailer-connect").addClass("text-danger")),jQuery("#cherry-mailer-connect").html(r.connect_message?"("+r.connect_message+")":"("+window.cherryMailerParam.default_disconnect_message+")"),noticeCreate(a,t),jQuery("#cherry-mailer-options-save").find("div").removeClass("active"),jQuery("#cherry-mailer-options-save").removeClass("right-spiner"),cherrymailerGeneratorView()})})});